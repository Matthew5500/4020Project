<!doctype html> <!--Declaration of HTML5 document-->
<html lang="en"> <!--Root element with language attribute set to English-->
<head> <!--Head section containing metadata and links to resources-->
  <meta charset="utf-8"> <!--Character encoding set to UTF-8-->
  <meta name="viewport" content="width=device-width, initial-scale=1"> <!--Viewport settings for responsive design-->
  <title>Receipt • Aurora Auctions</title> <!--Title of the webpage-->
  <link rel="stylesheet" href="/assets/css/main.css"> <!--Link to external CSS stylesheet for styling-->
</head> <!--End of head section-->
<body> <!--Start of body section containing visible content-->
  
<header class="site"> <!--Site-wide header-->
  <div class="inner"> <!--Layout wrapper for constraining width and adding padding-->
    <div class="brand"> <!--Grouping for logo and name-->
      <div class="logo" aria-hidden="true"></div> <!--Decorative logo. aria-hidden="true" informs the screen readers to ignore it as the brand name follows"-->
      <h1>Aurora Auctions</h1> <!--Site name for branding and SEO-->
    </div> <!--End of brand grouping-->
    <nav> <!--Navigation links-->
      <a href="/index.html">Home</a> <!--Link to home page-->
      <a href="/pages/browse.html">Browse</a> <!--Link to browse page-->
      <a href="/pages/sell.html">Sell</a> <!--Link to sell page-->
      <a href="/pages/profile.html">Profile</a> <!--Link to user profile page-->
      <a href="/pages/login.html" id="loginLink">Sign In</a> <!--Link to login page with ID for dynamic updates-->
      <button class="btn" id="logoutBtn" style="display:none">Sign Out</button> <!--Logout button, hidden by default, shown when user is logged in-->
    </nav> <!--End of navigation links-->
  </div> <!--End of layout wrapper-->
</header> <!--End of site-wide header-->
<script type="module"> //JavaScript module for handling user authentication and navigation state
import {DemoAPI, navActive} from '/assets/js/utils.js'; //Importing utility functions from external JS file
navActive(); //Highlight the active navigation link based on current page
const u = DemoAPI.user(); //Get the current user information
const loginLink = document.getElementById('loginLink'); //Get the login link element
const logoutBtn = document.getElementById('logoutBtn'); //Get the logout button element
if(u){ //If user is logged in
  loginLink.textContent = u.username; //Update login link text to show username
  loginLink.href = '/pages/profile.html'; //Change login link to point to profile page
  logoutBtn.style.display='inline-flex'; //Show the logout button
  logoutBtn.addEventListener('click', ()=>{ DemoAPI.signOut(); location.href='/index.html'; }); //Add click event to logout button to sign out user and redirect to home page
} //End of script for user authentication and navigation state
</script> <!--End of script for user authentication and navigation state-->

  <main class="container"> <!--Main content area with constrained width-->
    <section class="card" style="max-width:720px;margin:0 auto"> <!--Card component for receipt details-->
      <h2>Receipt</h2> <!--Heading for the receipt section-->
      <div id="r"></div> <!--Container for displaying receipt information-->
      <a class="btn" href="/pages/browse.html">Back to Browse</a> <!--Button link to return to browse page-->
    </section> <!--End of card component-->
  </main> <!--End of main content area-->
  
<footer> <!--Site-wide footer-->
  <div>© 2025 Aurora Auctions — Front-end demo. Configure your middle-tier URL in <span class="kbd">localStorage.API_BASE_URL</span>.</div> <!--Footer text with copyright and configuration info-->
</footer> <!--End of site-wide footer-->

  <script type="module"> //JavaScript module for loading and displaying receipt information
    import { $, formatCurrency } from '/assets/js/utils.js'; //Importing utility functions from external JS file
    const rec = JSON.parse(localStorage.getItem('LAST_RECEIPT')||'null'); //Retrieve and parse the last receipt from localStorage
    if(!rec){ $('#r').innerHTML = '<p>No receipt to display.</p>'; } //If no receipt found, display message
    else{ //If receipt found, populate receipt container with receipt information
      $('#r').innerHTML = ` <!--Populate receipt container with receipt information-->
        <p><strong>Receipt #</strong> ${rec.id}</p> <!--Display receipt ID-->
        <p><strong>Item</strong> ${rec.title}</p> <!--Display item title-->
        <p><strong>Item Price</strong> ${formatCurrency(rec.price)}</p> <!--Display item price-->
        <p><strong>Shipping</strong> ${formatCurrency(rec.ship)}</p> <!--Display shipping cost-->
        <p><strong>Total Paid</strong> ${formatCurrency(rec.total)}</p> <!--Display total amount paid-->
        <p class="helper">The item will be shipped in <strong>${rec.days} days</strong>.</p> <!--Display shipping duration-->
        <p class="helper">Timestamp: ${new Date(rec.when).toLocaleString()}</p> <!--Display timestamp of the transaction-->
      `; //End of receipt information population
    } //End of else block for receipt found
  </script> <!--End of script for loading and displaying receipt information-->
</body> <!--End of body section containing visible content-->
</html> <!--End of HTML document-->